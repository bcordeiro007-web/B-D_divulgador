<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador de Links</title>
<style>
  body { font-family: sans-serif; background: #f0f2f5; padding: 20px; display: flex; justify-content: center; }
  .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); width: 100%; max-width: 500px; }
  input, select, button { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
  button { background: #007bff; color: white; border: none; font-weight: bold; cursor: pointer; }
  button:hover { background: #0056b3; }
  .resultado { background: #e2e6ea; padding: 10px; border-radius: 5px; word-break: break-all; margin-top: 10px; display: none; }
  h2 { text-align: center; color: #333; }
  label { font-weight: bold; display: block; margin-bottom: 5px; }
</style>
</head>
<body>

<div class="card">
  <h2>Divulgador Rápido</h2>

  <label>Loja:</label>
  <select id="loja">
    <option value="shopee">Shopee</option>
    <option value="amazon">Amazon</option>
    <option value="magalu">Magalu</option>
    <option value="outra">Outra</option>
  </select>

  <label>Seu Código de Afiliado:</label>
  <input type="text" id="afiliado" placeholder="Ex: meu-codigo-123">

  <label>Link do Produto:</label>
  <input type="text" id="linkOriginal" placeholder="Cole o link aqui">

  <button onclick="gerar()">GERAR LINK</button>

  <div id="boxResultado" class="resultado">
    <p><strong>Seu Link:</strong></p>
    <a id="linkFinal" href="#" target="_blank"></a>
    <br><br>
    <button onclick="copiar()" style="background:#28a745;">Copiar</button>
  </div>
</div>

<script>
function gerar() {
  var loja = document.getElementById('loja').value;
  var cod = document.getElementById('afiliado').value;
  var link = document.getElementById('linkOriginal').value;
  
  if (!cod || !link) {
    alert("Preencha o código e o link!");
    return;
  }

  // Correção automática se o usuário esquecer o https
  if (!link.startsWith('http')) {
    link = 'https://' + link;
  }

  var novoLink = link;

  try {
    var url = new URL(link);
    
    if (loja === 'amazon') {
      url.searchParams.set('tag', cod);
      novoLink = url.toString();
    } else if (loja === 'magalu') {
      // Formato simples Magalu
      novoLink = "https://www.magazinevoce.com.br/" + cod + url.pathname;
    } else if (loja === 'shopee') {
      // Shopee básico
      url.searchParams.set('utm_source', cod);
      novoLink = url.toString();
    } else {
      url.searchParams.set('ref', cod);
      novoLink = url.toString();
    }

    document.getElementById('boxResultado').style.display = 'block';
    document.getElementById('linkFinal').href = novoLink;
    document.getElementById('linkFinal').innerText = novoLink;
    
  } catch (erro) {
    alert("Link inválido! Verifique se copiou corretamente.");
  }
}

function copiar() {
  var texto = document.getElementById('linkFinal').innerText;
  navigator.clipboard.writeText(texto).then(function() {
    alert("Link copiado!");
  }, function() {
    alert("Erro ao copiar. Tente selecionar e copiar manualmente.");
  });
}
</script>

</body>
</html>
